class Solution {
    public int calculate(String s) {
        Stack<Integer> st =new Stack<>();
        int curr =0;
        int sign =1;
        int result =0;

        for (int i =0; i<s.length();i++) {
            char ch =s.charAt(i);
            if (Character.isDigit(ch)) {
                curr =curr*10+(ch-'0');
            }
            else if (ch =='+') {
                result +=sign*curr;
                curr =0;
                sign =1;
            }
            else if (ch =='-') {
                result +=sign*curr;
                curr =0;
                sign =-1;
            }
            else if (ch =='(') {
                st.push(result);
                st.push(sign);
                result =0;
                sign =1;
            }
            else if (ch ==')') {
                result +=sign*curr;
                curr =0;
                result *=st.pop();
                result +=st.pop();
            }
        }
        result +=sign*curr;
        return result;
    }
}
